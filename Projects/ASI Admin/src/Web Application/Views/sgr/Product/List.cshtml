@using asi.asicentral.model.sgr
@model Company

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@Model.Name</h2>


<div class="container-fluid">
    <div class="row-fluid">
    <div class="span4">
    
    <a class="btn btn-small" href="@Url.Action("List", "Company")">
        <i class="icon-backward"></i>
        Back
    </a>

    <a class="btn btn-small" href="@Url.Action("Add", "../sgr/Category", new { id = Model.Id, categoryId = ViewBag.CategoryID })">
        <i class="icon-plus"></i>
        Add Category
    </a>

    <a class="btn btn-small" href="@Url.Action("Add", "../sgr/Product", new { id = Model.Id, categoryId = ViewBag.CategoryID })">
        <i class="icon-plus"></i>
        Add Product
    </a>

    </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <table class="table table-bordered table-condensed table-striped">
            <tr><th>Categories</th></tr>

            @foreach (Category category in Model.Categories)
            {
               <tr>
                   <td>   
                       <a class="btn btn-small" href="@Url.Action("Edit", "../sgr/Category", new { id = Model.Id, categoryId = category.Id })">
                           <i class="icon-pencil"></i>
                       </a>
                       @Html.ActionLink(@category.Name, "List", "Product", new { companyId = Model.Id, categoryId = category.Id }, null)
                   </td>
               </tr>
            }
            </table>
        </div>
        <div class="span8">
            <table class="table table-bordered table-condensed table-striped">
                <tr><th>ID</th><th>Product Name</th> <th>Model Number</th></tr>

                @{
                Category viewCategory = Model.Categories.Where(c => c.Id == ViewBag.CategoryID).SingleOrDefault();
                List<Product> products = viewCategory.Products.Where(p => p.Company.Id == Model.Id).ToList();
                }

                @foreach (Product product in products)
                {
                   <tr>
                       <td>
                           @product.Id
                       </td>
                       <td>
                           @Html.ActionLink(@product.Name, "Edit", "Product", new { productId = product.Id, categoryId = ViewBag.CategoryID }, null)
                       </td>
                       <td>
                           @product.ModelNumber
                       </td>
                   </tr>
                }
                                
            </table>
        </div>
    </div>
</div>

<div>
</div>